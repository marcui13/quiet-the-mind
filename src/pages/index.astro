---
import MainLayout from "../layouts/MainLayout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import Hero from "../components/Hero.astro";
import Section from "../components/Section.astro";
import Card from "../components/Card.astro";
import Button from "../components/Button.astro";
import { getLangFromUrl, useTranslations } from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<MainLayout title={t("site.title")}>
  <Header slot="header" />

  <!-- Hero Section -->
  <Hero
    title={t("home.hero.title")}
    subtitle={t("home.hero.subtitle")}
    ctaText={t("home.hero.cta")}
    ctaLink="#topics"
  />

  <!-- Introduction Section -->
  <Section
    id="introduction"
    title={t("home.introduction.title")}
    subtitle={t("home.introduction.subtitle")}
    centerContent={true}
  >
    <div class="max-w-4xl mx-auto">
      <div class="grid md:grid-cols-3 gap-6">
        <Card
          title={t("home.introduction.card1.title")}
          icon="üìö"
          description={t("home.introduction.card1.description")}
        />
        <Card
          title={t("home.introduction.card2.title")}
          icon="üõ†Ô∏è"
          description={t("home.introduction.card2.description")}
        />
        <Card
          title={t("home.introduction.card3.title")}
          icon="üåø"
          description={t("home.introduction.card3.description")}
        />
      </div>
    </div>
  </Section>

  <!-- Topics Showcase Section -->
  <Section
    id="topics"
    title={t("home.topics.title")}
    subtitle={t("home.topics.subtitle")}
    bgColor="bg-gray-50 dark:bg-gray-800"
    centerContent={true}
  >
    <div class="max-w-5xl mx-auto">
      <div class="grid md:grid-cols-2 gap-8">
        <!-- Intrusive Thoughts Topic -->
        <Card
          title={t("home.topics.intrusive_thoughts.title")}
          icon="üå™Ô∏è"
          variant="highlighted"
          class="hover-lift group"
        >
          <div class="space-y-4">
            <p class="text-gray-600 dark:text-gray-300">
              {t("home.topics.intrusive_thoughts.description")}
            </p>
            <div class="space-y-2 text-sm text-gray-500 dark:text-gray-400">
              <div class="flex items-center space-x-2">
                <span>üìã</span>
                <span>Types & Patterns</span>
              </div>
              <div class="flex items-center space-x-2">
                <span>üîç</span>
                <span>Causes & Triggers</span>
              </div>
              <div class="flex items-center space-x-2">
                <span>üõ†Ô∏è</span>
                <span>Coping Strategies</span>
              </div>
            </div>
            <div class="pt-4">
              <Button href="/topics/intrusive-thoughts" variant="primary" class="w-full group-hover:scale-105 transition-transform">
                {t("button.explore_topic")}
              </Button>
            </div>
          </div>
        </Card>

        <!-- Self-Esteem Topic -->
        <Card
          title={t("home.topics.self_esteem.title")}
          icon="‚ú®"
          variant="highlighted"
          class="hover-lift group"
        >
          <div class="space-y-4">
            <p class="text-gray-600 dark:text-gray-300">
              {t("home.topics.self_esteem.description")}
            </p>
            <div class="space-y-2 text-sm text-gray-500 dark:text-gray-400">
              <div class="flex items-center space-x-2">
                <span>ü§ù</span>
                <span>Healthy Relationships</span>
              </div>
              <div class="flex items-center space-x-2">
                <span>ü´∂</span>
                <span>Self-Acceptance</span>
              </div>
              <div class="flex items-center space-x-2">
                <span>üôè</span>
                <span>Building Confidence</span>
              </div>
            </div>
            <div class="pt-4">
              <Button href="/topics/self-esteem" variant="primary" class="w-full group-hover:scale-105 transition-transform">
                {t("button.explore_topic")}
              </Button>
            </div>
          </div>
        </Card>
      </div>

      <!-- View All Topics Button -->
      <div class="text-center mt-8">
        <Button href="/topics" variant="secondary" size="lg">
          View All Topics ‚Üí
        </Button>
      </div>
    </div>
  </Section>

  <!-- Objective Section -->
  <Section
    title={t("home.objective.title")}
    bgColor="bg-blue-50 dark:bg-gray-800"
    centerContent={true}
  >
    <div class="max-w-4xl mx-auto text-center space-y-8">
      <p class="text-lg text-gray-700 dark:text-gray-300 leading-relaxed">
        {t("home.objective.description")}
      </p>

      <div class="grid md:grid-cols-3 gap-6">
        <Card
          title={t("home.objective.card1.title")}
          icon="üåê"
          variant="highlighted"
          description={t("home.objective.card1.description")}
        />
        <Card
          title={t("home.objective.card2.title")}
          icon="‚ö°"
          variant="highlighted"
          description={t("home.objective.card2.description")}
        />
        <Card
          title={t("home.objective.card3.title")}
          icon="ü§ù"
          variant="highlighted"
          description={t("home.objective.card3.description")}
        />
      </div>

      <div class="pt-8 flex flex-col sm:flex-row justify-center gap-4">
        <Button href="/topics" variant="primary" size="lg">
          {t("home.objective.cta")}
        </Button>
        <Button href="/resources" variant="secondary" size="lg">
          Professional Resources
        </Button>
      </div>
    </div>
  </Section>

  <!-- Remember Section -->
  <Section
    title={t("home.remember.title")}
    bgColor="bg-gradient-to-br from-blue-50/50 to-purple-50/50 dark:from-blue-900/10 dark:to-purple-900/10"
    centerContent={true}
  >
    <div class="max-w-3xl mx-auto">
      <Card
        title={t("home.remember.card.title")}
        icon="ü§ù"
        variant="minimal"
        class="text-center"
      >
        <p class="text-gray-600 dark:text-gray-300 mb-6">
          {t("home.remember.card.description")}
        </p>
        <div class="flex flex-col sm:flex-row justify-center gap-4">
          <Button href="/topics" variant="secondary">
            {t("home.remember.cta1")}
          </Button>
          <Button href="/resources" variant="outline">
            {t("home.remember.cta2")}
          </Button>
        </div>
      </Card>
    </div>
  </Section>

  <Footer slot="footer" />
</MainLayout>